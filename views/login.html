
<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Login</title>
  <meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />
  <link rel="icon" href="../assets/img/icon.ico" type="image/x-icon"/>

  <!-- Fonts and icons -->
  <script src="../assets/js/plugin/webfont/webfont.min.js"></script>
  <script>
    WebFont.load({
      google: {"families":["Lato:300,400,700,900"]},
      custom: {"families":["Flaticon", "Font Awesome 5 Solid", "Font Awesome 5 Regular", "Font Awesome 5 Brands", "simple-line-icons"], urls: ['../assets/css/fonts.min.css']},
      active: function() {
        sessionStorage.fonts = true;
      }
    });
  </script>
  
  <!-- CSS Files -->
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="../assets/css/atlantis.css">
</head>
<body class="login bg-light-gradient" style="width: 98%;">

<div class="row justify-content-center align-items-center mb-5 m-1" id="show_login">
           
          
            <div class="col-md-4 mt-1">
              <div class="card card-profile card-rouded" style="border-top-left-radius:10px;border-top-right-radius: 10px;">
                <div class="card-header" style="background-image: url('../assets/img/blogpost.jpg');border-top-left-radius:10px;border-top-right-radius: 10px; box-shadow: 0px 5px 5px  silver">
                  <div class="profile-picture">
                    <div class="avatar avatar-xl">
                      <img src="../assets/heart-rate.jpg" alt="..." class="avatar-img rounded-circle" style="border:2px solid rgb(100,120,220); box-shadow: 5px 5px 5px  silver">
                    </div>
                  </div>
                </div>
                <div class="card-body card-rounded">
                  <div class="user-profile text-center">
                    <div class="name">Login</div>
                    <div class="job">HeartSport</div>
                    <div class="desc">Aplikasi Pendampingan Olahraga IoT</div>
                    

                  </div>
                  <div class="login-form">
                    <div class="form-group form-floating-label">
                      <input id="username" name="username" type="text" class="form-control input-border-bottom" required="">
                      <label for="username" class="placeholder">Username</label>
                    </div>
                    <div class="form-group form-floating-label">
                      <input id="password" name="password" type="password" class="form-control input-border-bottom" required="">
                      <label for="password" class="placeholder">Password</label>
                      <div class="show-password text-right">
                       <p class="text-primary">Show Password <i class="icon-eye"></i></p> 
                      </div>
                    </div>
                   
                  </div>
                  <div class="view-profile mb-10">
                      <a href="#" class="btn btn-primary btn-block" onclick="login()">Login</a>
                  </div>
                    <br>
                    <br>
                    <div class="show-password text-center">
                       <p>Belum Punya akun?</p> 
                       
                       <a href="#" class="btn btn-success btn-block" onclick="show_register()">Register</a>
                    </div>
                </div>
               
              </div>
            </div>
          </div>

<!-- show register
 -->

<div class="row justify-content-center align-items-center mb-5 m-1" id="show_register">
           
          
            <div class="col-md-4 mt-1">
              <div class="card card-profile card-rouded" style="border-top-left-radius:10px;border-top-right-radius: 10px;">
                <div class="card-header" style="background-image: url('../assets/img/blogpost.jpg');border-top-left-radius:10px;border-top-right-radius: 10px; box-shadow: 0px 5px 5px  silver">
                  <div class="profile-picture">
                    <div class="avatar avatar-xl">
                      <img src="../assets/heart-rate.jpg" alt="..." class="avatar-img rounded-circle" style="border:2px solid rgb(100,120,220); box-shadow: 5px 5px 5px  silver">
                    </div>
                  </div>
                </div>
                <div class="card-body card-rounded">
                  <div class="user-profile text-center">
                    <div class="name">Register</div>
                    <div class="job">HeartSport</div>
                    <div class="desc">Aplikasi Pendampingan Olahraga IoT</div>
                    

                  </div>
                  <div class="login-form">
                    <div class="form-group form-floating-label">
                      <input id="username_reg" name="username_reg" type="text" class="form-control input-border-bottom" required="">
                      <label for="username" class="placeholder">Username</label>
                    </div>
                    <div class="form-group form-floating-label">
                      <input id="password_reg" name="password_reg" type="password" class="form-control input-border-bottom" required="">
                      <label for="password" class="placeholder">Password</label>
                      
                    </div>
                    <div class="form-group form-floating-label">
                      <input id="usia_reg" name="usia_reg" type="text" class="form-control input-border-bottom" required="">
                      <label for="usia" class="placeholder">Usia</label>
                    </div>
                    <div class="form-group form-floating-label">
                      <select class="form-control" id="id_alat_reg">
                        <option value="1">123456</option>
                        <option value="2">222222</option>
                        <option value="3">333333</option>
                        <option value="4">444444</option>
                        <option value="5">555555</option>
                      </select>
                      <label for="alat" class="placeholder">Kode Alat</label>
                    </div>
                   
                  </div>
                  <br>
                  <br>
                  <div class="view-profile mb-10">
                      <a href="#" class="btn btn-success btn-block" onclick="register()">Register</a>
                  </div>
                    <br>
                    <br>
                    <div class="show-password text-center">
                       <p>Sudah Punya akun?</p> 
                       
                       <a href="#" class="btn btn-primary btn-block" onclick="show_login()">Kembali Ke Login</a>
                    </div>
                </div>
               
              </div>
            </div>
          </div>

<script src="../assets/js/core/jquery.3.2.1.min.js"></script>
  <script src="../assets/js/core/popper.min.js"></script>
  <script src="../assets/js/core/bootstrap.min.js"></script>

  <!-- jQuery UI -->
  <script src="../assets/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
  <script src="../assets/js/plugin/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js"></script>

  <!-- jQuery Scrollbar -->
  <script src="../assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>


  <!-- Chart JS -->
  <script src="../assets/js/plugin/chart.js/chart.min.js"></script>

  <!-- jQuery Sparkline -->
  <script src="../assets/js/plugin/jquery.sparkline/jquery.sparkline.min.js"></script>

  <!-- Chart Circle -->
  <script src="../assets/js/plugin/chart-circle/circles.min.js"></script>

  <!-- Datatables -->
  <script src="../assets/js/plugin/datatables/datatables.min.js"></script>

  <!-- Bootstrap Notify -->
  <script src="../assets/js/plugin/bootstrap-notify/bootstrap-notify.min.js"></script>

  <!-- jQuery Vector Maps -->
  <script src="../assets/js/plugin/jqvmap/jquery.vmap.min.js"></script>
  <script src="../assets/js/plugin/jqvmap/maps/jquery.vmap.world.js"></script>

  <!-- Sweet Alert -->
  <script src="../assets/js/plugin/sweetalert/sweetalert.min.js"></script>

  <!-- Atlantis JS -->
  <script src="../assets/js/atlantis.min.js"></script>




  <script type="text/javascript">

$("document").ready(function(){
show_login();
});


function show_register(){
  $("#show_login").hide(1000);
  $("#show_register").show(1000);
}


function show_login(){
  $("#show_login").show(1000);
  $("#show_register").hide(1000);
}


  
    function login() {
  // Mengambil nilai dari input form
  var username = $("#username").val();
  var password = $("#password").val();

  // Membuat objek data untuk dikirim ke server
  var data = {
    username: username,
    password: password,
  };

  // Mengirim data ke server menggunakan AJAX
  $.ajax({
    url: "/login_form", // Ganti dengan URL yang sesuai
    method: "POST", // Menggunakan metode POST untuk menambahkan data
    dataType: "JSON",
    data: data,
    success: function(json) {
      

          if(json.status == 1){

             swal({
                    title: "Berhasil!",
                    text: "Login Akun Berhasil!",
                    icon: "success"
                  });
              setTimeout(function() {
                  window.location.href = '/';

              }, 2000);
        }else{
           swal({
            title: "Gagal!",
            text: "Username/Password Salah. Silahkan Ulangi!",
            icon: "error"
          });
        }
      
      
    },
    error: function(error) {
      // Menangani kesalahan jika ada
      console.error("Gagal Login:", error);
      alert("Username Atau Password salah!")
    },
  });
}


function register(){
  var username_reg = $("#username_reg").val();
  var password_reg = $("#password_reg").val();
  var usia_reg =$("#usia_reg").val();
  var id_alat_reg =$("#id_alat_reg option:selected").val();

  var data = {
    username:username_reg,
    password:password_reg,
    usia:usia_reg,
    id_alat:id_alat_reg,
  }
   $.ajax({
    url: "/register_form", // Ganti dengan URL yang sesuai
    method: "POST", // Menggunakan metode POST untuk menambahkan data
    dataType: "JSON",
    data: data,
    success: function(json) {
      

          if(json.status == 1){

             swal({
                    title: "Berhasil!",
                    text: "Register Akun Berhasil!",
                    icon: "success"
                  });
              setTimeout(function() {
                  window.location.href = '/login';

              }, 2000);
        }else{
           swal({
            title: "Gagal!",
            text: "Gagal Register. Silahkan Ulangi!",
            icon: "error"
          });
        }
      
      }
    });

}


  </script>
</body>
</html>